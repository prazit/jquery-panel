<!DOCTYPE html>
<html>

<head>
    <title>Analog Clock using focus-3.html</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="focus-3.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="http://localhost/scbs/css/sym-fa.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="http://localhost/scbs/css/ani-anicss.css"/>

    <!-- animation -->
    <style>

        @keyframes ani-clock {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .ani-clock {
            -webkit-animation-name: ani-clock;
            animation-name: ani-clock;
        }

        .clock {
            position: absolute;
            width: 100vh;
            height: 100vh;
            left: calc((100vw - 100vh) / 2);
            display: none;
        }

        .minutes > div {
            position: absolute;
            width: 100vh;
            height: 100vh;
        }
    </style>
</head>

<body class="css-trans fixed background--c0 fit-width fit-height" style="font-family: Arial,sans-serif;">

<div class="clock numbers">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
         viewBox="0 0 200 200"
         stroke="gold"
         fill="#000033"
         style="width:100%">
        <circle cx="100" cy="100" r="98"
                stroke-opacity="1" stroke-width="2"
                stroke-linecap="butt"
                stroke-dashoffset="0" stroke-dasharray="0"/>
        <text x="90.5" y="17">12</text>
        <text x="7" y="105">9</text>
        <text x="95.5" y="194.5">6</text>
        <text x="184.5" y="105">3</text>
    </svg>
</div>

<div class="clock five minutes">
    <div class="number-id">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
             viewBox="0 0 200 200"
             stroke="gold"
             fill="gold"
             style="width:100%">
            <line x1="100" x2="100" y1="3" y2="12" stroke-width="2"></line>
        </svg>
    </div>
</div>

<div class="clock one minutes">
    <div class="number-id">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
             viewBox="0 0 200 200"
             stroke="gold"
             fill="gold"
             style="width:100%">
            <line x1="100" x2="100" y1="3" y2="7" stroke-width="1"></line>
        </svg>
    </div>
</div>

<div class="clock second">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
         viewBox="0 0 200 200"
         stroke="gold"
         fill="gold"
         style="width:100%">
        <circle class='hidden' cx="100" cy="100" r="5" fill="lightgreen"/>
        <circle class='opacity--x10' cx="100" cy="100" r="76"
                fill="transparent"
                stroke-opacity="1" stroke-width="2"
                stroke-linecap="butt"
                stroke-dashoffset="0" stroke-dasharray="2"/>
        <polygon class='hidden' points="100,19 103,22 97,22 100,19" stroke-width="1"/>
        <line x1="100" x2="100" y1="23" y2="100" stroke-width="2" stroke-linecap="round"></line>
    </svg>
</div>

<div class="clock minute">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
         viewBox="0 0 200 200"
         stroke="silver"
         fill="silver"
         style="width:100%">
        <circle class='hidden' cx="100" cy="100" r="4"/>
        <circle class='opacity--x10' cx="100" cy="100" r="60"
                fill="transparent"
                stroke-opacity="1" stroke-width="5"
                stroke-linecap="butt"
                stroke-dashoffset="0" stroke-dasharray="2"/>
        <polygon class='hidden' points="100,31 104,36 96,36 100,31" stroke-width="1"/>
        <line x1="100" x2="100" y1="37" y2="100" stroke-width="2.7" stroke-linecap="round"></line>
    </svg>
</div>

<div class="clock hour">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
         viewBox="0 0 200 200"
         stroke="red"
         fill="red"
         style="width:100%">
        <circle cx="100" cy="100" r="4"/>
        <circle class='opacity--x10' cx="100" cy="100" r="40"
                fill="transparent"
                stroke-opacity="1" stroke-width="7"
                stroke-linecap="butt"
                stroke-dashoffset="0" stroke-dasharray="2"/>
        <polygon class='hidden' points="100,50 104,55 96,55 100,50" stroke-width="1"/>
        <line x1="100" x2="100" y1="56" y2="100" stroke-width="3.5" stroke-linecap="round"></line>
    </svg>
</div>

<!-- JS -->
<script type="text/javascript" src="http://localhost/jquery/1.11/jquery.js"></script>
<script type="text/javascript" src="../dist/jquery.panel.suite.min.js"></script>
<script type="text/javascript" src="../src/jquery.theme.js"></script>
<script>
    Appanel({
        theme: {
            init: function () {
                var theme = new Theme();
                theme.add('handSecond', ['stroke', 'fill'], $('.second svg'));
                theme.add('handMinute', ['stroke', 'fill'], $('.minute svg'));
                theme.add('handHour', ['stroke', 'fill'], $('.hour svg'));
                theme.add('numbers', ['stroke', 'fill'], $('.numbers text'));
                theme.add('minutes', ['stroke', 'fill'], $('.one.minutes line'));
                theme.add('fiveMinutes', ['stroke', 'fill'], $('.five.minutes line'));
                theme.add('frame', 'stroke', $('.numbers circle'));
                theme.add('background', 'fill', $('.numbers circle'));
                theme.add('outSide', 'background-color', $('body'));
                Appanel['theme'] = new Profile('analogue-clock', theme);
            }
        },
        ready: function () {
            var sweeper = {
                duration: 0.00001,
                on: "sweep:ready",
                sweep: []
            };

            //1round = 12hours = 60s x 60 x 12 (loop=1day=2rounds)
            sweeper.sweep.push(this.getSweeper('.hour > svg', 'ani-clock', 43200, 2));

            //1round = 60minutes = 60s x 60 (loop=1day=12rounds)
            sweeper.sweep.push(this.getSweeper('.minute > svg', 'ani-clock', 3600, 12));

            //1round = 1minutes = 60s (loop=1day=43200rounds)
            sweeper.sweep.push(this.getSweeper('.second > svg', 'ani-clock', 60, 3600));

            this.createMinutes($('.five.minutes'), {
                "0": 0,
                "1": 30,
                "2": 60,
                "3": 0,//90,
                "4": 120,
                "5": 150,
                "6": 0,//180,
                "7": 210,
                "8": 240,
                "9": 0,//270,
                "10": 300,
                "11": 330,
                "12": 0//360
            }, 12);

            this.createMinutes($('.one.minutes'), {
                "0": 0,
                "1": 6,
                "2": 12,
                "3": 18,
                "4": 24,
                "5": 0,//30,
                "6": 36,
                "7": 42,
                "8": 48,
                "9": 54,
                "10": 0,//60,
                "11": 66,
                "12": 72,
                "13": 78,
                "14": 84,
                "15": 0,//90,
                "16": 96,
                "17": 102,
                "18": 108,
                "19": 114,
                "20": 0,//120,
                "21": 125.99999999999999,
                "22": 132,
                "23": 138,
                "24": 144,
                "25": 0,//150,
                "26": 156,
                "27": 162,
                "28": 168,
                "29": 174,
                "30": 0,//180,
                "31": 186.00000000000003,
                "32": 192,
                "33": 198.00000000000003,
                "34": 204,
                "35": 0,//210,
                "36": 216,
                "37": 222,
                "38": 228,
                "39": 234,
                "40": 0,//240,
                "41": 246,
                "42": 251.99999999999997,
                "43": 258,
                "44": 264,
                "45": 0,//270,
                "46": 276,
                "47": 282,
                "48": 288,
                "49": 294,
                "50": 0,//300,
                "51": 306,
                "52": 312,
                "53": 318,
                "54": 324,
                "55": 0,//330,
                "56": 336,
                "57": 342,
                "58": 348,
                "59": 354
            }, 60);

            this.moveToCurrentTime(new Date());
            $('.hour,.minute,.second').sweep(sweeper);
            $('.clock').css('display', 'block');

            this.refreshAfter(3600);

            this.theme.init();
            if (!Appanel.theme.contains('default')) {
                Appanel.theme.save('default', {
                    handSecond: 'red',
                    handMinute: 'orange',
                    handHour: 'gold',
                    numbers: 'gold',
                    minutes: '#000000',
                    fiveMinutes: '#222222',
                    frame: 'silver',
                    background: 'navy',
                    outSide: 'bluesky'
                });
            }
            Appanel.theme.load('default');
        },
        getSweeper: function (selector, play, duration, loop) {
            return {
                selector: selector,
                play: play,
                timing: 'linear',
                duration: duration,
                loop: loop
            };
        }
        ,
        createMinutes: function (container, degrees, count) {
            var template = container[0].innerHTML;
            container[0].innerHTML = "";
            for (var i = 0; i < count; i++) {
                if (degrees[i] === 0) continue;
                container.append(template.replace('number-id', 'number-' + i));
                container.find('.number-' + i).css('transform', 'rotate(' + degrees[i] + 'deg)');
            }
        }
        ,
        moveToCurrentTime: function (now) {
            var hour = now.getHours(),
                minute = now.getMinutes(),
                second = now.getSeconds(),
                hours, minutes, seconds;

            seconds = second / 60;
            $('.second').css('transform', 'rotate(' + (seconds * 360) + 'deg)');

            minutes = (minute + seconds) / 60;
            $('.minute').css('transform', 'rotate(' + (minutes * 360) + 'deg)');

            hours = (hour + minutes) / 12 * 360;
            $('.hour').css('transform', 'rotate(' + hours + 'deg)');

        }
        ,
        refreshAfter: function (seconds) {
            var timeout = setTimeout(function () {
                clearTimeout(timeout);
                var src = window.top.location.href,
                    lastIndex = src.indexOf("?"),
                    src = src.substr(0, lastIndex > 0 ? lastIndex : src.length) + '?refresh=' + Date().toString();
                window.top.location.href = src;
            }, seconds * 1000);
        }
    })
    ;
</script>
</body>
</html>
